<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>The capopt program</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/capopt/assets/css/style-main.css">
    
    <!--<link rel="stylesheet" href="/assets/css/style-main.css">
    -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>

  <body>
    <div class="container">
        <h1 id="capopt-capping-methods-for-the-automatic-configuration-of-optimization-algorithms">capopt: Capping Methods for the Automatic Configuration of Optimization Algorithms</h1>

<p>Welcome to the <em>capopt</em> project website! Check our <a href="https://github.com/souzamarcelo/capopt" target="_blank">GitHub repository</a>.<br />
<a href="#people">people</a> |
<a href="#dependencies">dependencies</a> |
<a href="#getting-started">getting started</a> |
<a href="#example">example</a> |
<a href="#license">license</a></p>

<hr />

<p>The capopt program implements several capping methods to speed up the automatic configuration of optimization algorithms. These methods use the performance of previously seen executions to determine a performance envelope, which is used to evaluate how good a new configuration is during its execution. If a poorly performing configuration is identified, capopt stops the execution and returns a penalized result value.</p>

<p><strong><span style="background-color:#D2E9DA">Download <em>capopt</em> from our <a href="https://github.com/souzamarcelo/capopt" target="_blank">GitHub repository</a>!</span></strong></p>

<p>The following article describes <em>capopt</em> in detail and presents an extensive experimental evaluation. You can also check its <a href="suppcor" target="_blank">supplementary page</a> for further experimental details.</p>

<blockquote>
  <p><strong>Capping Strategies for the Automatic Configuration of Optimization Algorithms</strong><br />
Marcelo de Souza, Marcus Ritt, and Manuel López-Ibáñez<br />
Submitted to Computers &amp; Operations Research, 2020.<br />
[preprint will be available soon | <a href="suppcor" target="_blank">supplementary page</a>]</p>
</blockquote>

<h4 id="bibtex">Bibtex</h4>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@article{DeSouzaEtAl2020,
   title   = {Capping Strategies for the Automatic Configuration of Optimization Algorithms},
   author  = {Souza, Marcelo and Ritt, Marcus and L{\'o}pez-Ib{\'a}{\~n}ez, Manuel},
   journal = {Submitted to Computers \&amp; Operations Research},
   year    = {2020}
}
</code></pre></div></div>

<p>Please, make sure to reference us if you use <em>capopt</em> in your research.</p>

<hr />

<h2 id="people">People</h2>

<p><strong>Maintainer:</strong> <a href="https://souzamarcelo.github.io" target="_blank">Marcelo de Souza</a></p>

<p><strong>Collaborators:</strong> <a href="https://www.inf.ufrgs.br/~mrpritt" target="_blank">Marcus Ritt</a> and <a href="http://lopez-ibanez.eu" target="_blank">Manuel López-Ibáñez</a></p>

<p><strong>Contact:</strong> <a href="mailto:marcelo.desouza@udesc.br">marcelo.desouza@udesc.br</a> (feel free to contact us for any question or suggestion).</p>

<hr />

<h2 id="dependencies">Dependencies</h2>

<p>The <em>capopt</em> program is written in <a href="https://www.python.org">Python 3</a>, and uses the following non-standard libraries:</p>

<ul>
  <li><a href="https://psutil.readthedocs.io/en/latest">psutil</a></li>
  <li><a href="https://rpy2.github.io">rpy2</a></li>
</ul>

<p>If you are using <em>capopt</em> with irace, you need to install:</p>

<ul>
  <li><a href="https://www.r-project.org">R software environment</a></li>
  <li><a href="http://iridia.ulb.ac.be/irace">irace package</a>.</li>
</ul>

<hr />

<h2 id="getting-started">Getting Started</h2>

<p>To use <em>capopt</em> with the irace configurator, set the project directory according to the <a href="https://cran.r-project.org/web/packages/irace/vignettes/irace-package.pdf" target="_blank">irace user guide</a>, then follow the steps below:</p>

<ol>
  <li>
    <p><a href="https://github.com/souzamarcelo/capopt" target="_blank">Download <em>capopt</em></a>.
<br /><br /></p>
  </li>
  <li>Copy the source code (<code class="highlighter-rouge">capopt</code> folder) to the project directory.
    <ul>
      <li><em>capopt</em> will replace the <code class="highlighter-rouge">target-runner</code> script that is used to communicate irace with the target algorithm.
<br /><br /></li>
    </ul>
  </li>
  <li>Configure the parameter settings of <em>capopt</em>.
    <ul>
      <li>Create a file named <code class="highlighter-rouge">parameters-capopt.txt</code> in the project directory.</li>
      <li>Copy the content of <a href="https://github.com/souzamarcelo/capopt/blob/master/examples/parameters-capopt.txt" target="_blank">this file</a> and set the corresponding information (make sure to uncomment the properties you set).
<br /><br /></li>
    </ul>
  </li>
  <li>Configure irace to call capopt as target runner.
    <ul>
      <li>Include <code class="highlighter-rouge">targetRunner = "./capopt/capopt.py"</code> in the <code class="highlighter-rouge">scenario.txt</code> file.
<br /><br /></li>
    </ul>
  </li>
  <li>If you need, make some adjustements on <code class="highlighter-rouge">capopt.py</code>.
    <ul>
      <li>You can change the <code class="highlighter-rouge">parseOutput</code> function to handle the target algorithm’s output properly.</li>
      <li>The provided <code class="highlighter-rouge">parseOutput</code> behaves as follows:
        <ul>
          <li>In case of using time as effort measure, <em>capopt</em> manages the execution time externaly and expects to read only the solution cost (e.g. “1673.44”).</li>
          <li>In case of using another effort measure, <em>capopt</em> expects to read the effort and the solution cost separated by a whitespace (e.g. “493 1673.44”).
<br /><br /></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Done!</strong> You can now run irace with <em>capopt</em>. You should have a project directory with (at least) the following content:
    <ul>
      <li><code class="highlighter-rouge">capopt</code>: folder containing <em>capopt</em>.</li>
      <li><code class="highlighter-rouge">instances</code>: folder containing the training instances.</li>
      <li><code class="highlighter-rouge">algorithm</code>: the target algorithm executable.</li>
      <li><code class="highlighter-rouge">parameters.txt</code>: file defining the parameters to be configured.</li>
      <li><code class="highlighter-rouge">scenario.txt</code>: file defining the input parameters of irace.</li>
      <li><code class="highlighter-rouge">parameters-capopt.txt</code>: file defining the input parameters of <em>capopt</em>.</li>
    </ul>
  </li>
</ol>

<p><strong>Important:</strong></p>
<ul>
  <li>The target algorithm must periodically output the cost of the best found solution. This is the only requirement to use <em>capopt</em>.</li>
  <li>In case of difficulties, check the example below or contact us (marcelo.desouza@udesc.br).</li>
</ul>

<hr />

<h2 id="example">Example</h2>

<p><strong>ACOTSP</strong></p>

<p><a href="https://github.com/capopt/capopt/tree/master/examples/acotsp" target="_blank">This directory</a> contains the files for using capping to configure ACOTSP:</p>
<ul>
  <li><code class="highlighter-rouge">capopt</code> folder;</li>
  <li><code class="highlighter-rouge">instances</code> folder;</li>
  <li><code class="highlighter-rouge">src-acotsp</code> folder with the source code of ACOTSP;
    <ul>
      <li>make sure to compile the source code and copy the executable (<code class="highlighter-rouge">acotsp</code>) to the project directory.</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">parameters-acotsp.txt</code> file with the parameter space definition;</li>
  <li><code class="highlighter-rouge">parameters-capopt.txt</code> file;</li>
  <li><code class="highlighter-rouge">scenario.txt</code> file.</li>
</ul>

<p>The content of <code class="highlighter-rouge">parameters-capopt.txt</code> is given below. Note that the target algorithm is called using <code class="highlighter-rouge">./acotsp</code>, and always giving the fixed fixed parameters <code class="highlighter-rouge">-r 1 --quiet</code>. The instance, seed and effort limit are identified by the commands <code class="highlighter-rouge">-i</code>, <code class="highlighter-rouge">--seed</code>,  <code class="highlighter-rouge">-t</code>, respectively. We are using the running time as effort measure and 20 sec. as effort limit. We are also using the area-based adaptive capping method, with best-so-far penalty strategy and parameters a<sub>g</sub>= 0.4 and ε = 0.05.</p>

<h4 id="parameters-capopttxt">parameters-capopt.txt</h4>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>executable: ./acotsp
fixed-params: -r 1 --quiet
instance-command: -i
seed-command: --seed
effort-limit-command: -t
effort-limit: 20
effort-type: time
capping: True
penalty: best-so-far
envelope: area
strategy: adaptive
ag: 0.4
epsilon: 0.05
</code></pre></div></div>

<p>The content of <code class="highlighter-rouge">scenario.txt</code> is given below. The file indicates the parameters definition, execution directory, training instances directory, configuration budget, and the number of digits for real parameters. The last lilne defined the target runner, which is the <em>capopt</em> script.</p>

<h4 id="scenariotxt">scenario.txt</h4>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>parameterFile = "./parameters-acotsp.txt"
execDir = "."
trainInstancesDir = "./instances"
maxExperiments = 2000
digits = 2
targetRunner = "./capopt/capopt.py"
</code></pre></div></div>

<hr />

<h2 id="license">License</h2>

<p>This software is Copyright (C) 2020 Marcelo de Souza.</p>

<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>

<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p>

<p>You should have received a copy of the GNU General Public License along with this program (see https://github.com/capopt/capopt). If not, see https://www.gnu.org/licenses.</p>

<p>IMPORTANT NOTE: Please be aware that the fact that this program is released as Free Software does not excuse you from scientific propriety, which obligates you to give appropriate credit! If you write a scientific paper describing research that made substantive use of this program, it is your obligation as a scientist to (a) mention the fashion in which this software was used in the Methods section; (b) mention the algorithm in the References section. The appropriate citation is:</p>

<ul>
  <li>Marcelo de Souza, Marcus Ritt, and Manuel López-Ibáñez. Capping Strategies for the Automatic Configuration of Optimization Algorithms. Submitted to Computers &amp; Operations Research, 2020.</li>
</ul>

<p><br /><br /></p>


    </div>
  </body>
</html>
